# é£²æ–™é»é¤ AI åŠ©ç†

ä¸€å€‹åŸºæ–¼ Ollama çš„æ™ºæ…§é£²æ–™é»é¤ç³»çµ±ï¼Œæ”¯æ´å®Œæ•´çš„é»é¤ã€çµå¸³å’Œè£½ä½œæµç¨‹ã€‚

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

é€™å€‹å°ˆæ¡ˆå¯¦ç¾äº†ä¸€å€‹å®Œæ•´çš„é£²æ–™åº—é»é¤ç³»çµ±ï¼ŒåŒ…å«å…©å€‹ä¸»è¦ç‰ˆæœ¬ï¼š

- **Step1**: åŸºç¤é»é¤ç³»çµ± - ä½¿ç”¨ AI å°è©±è§£æè¨‚å–®
- **Step2**: å®Œæ•´çµå¸³ç³»çµ± - æ•´åˆ Function Calling çš„æ™ºæ…§é»é¤æµç¨‹

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
AI-Agent/
â”œâ”€â”€ step1.mjs              # åŸºç¤é»é¤ç³»çµ±ï¼ˆAI å°è©±è§£æï¼‰
â”œâ”€â”€ step2.mjs              # å®Œæ•´çµå¸³ç³»çµ±ï¼ˆFunction Callingï¼‰
â”œâ”€â”€ production-manager.mjs  # è£½ä½œéƒ¨é–€ç®¡ç†å·¥å…·
â”œâ”€â”€ contant.mjs            # Step1 ç³»çµ±è¨­å®š
â”œâ”€â”€ contant_step2.mjs      # Step2 ç³»çµ±è¨­å®š
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ menu.json          # èœå–®è³‡æ–™åº«
â”‚   â”œâ”€â”€ orders.json        # è¨‚å–®è¨˜éŒ„
â”‚   â”œâ”€â”€ payments.json      # æ”¯ä»˜è¨˜éŒ„
â”‚   â””â”€â”€ production.json    # è£½ä½œè¨‚å–®
â””â”€â”€ utils/
    â”œâ”€â”€ menu.mjs           # èœå–®è™•ç†æ¨¡çµ„
    â”œâ”€â”€ order.mjs          # è¨‚å–®è™•ç†æ¨¡çµ„
    â”œâ”€â”€ payment.mjs        # æ”¯ä»˜è™•ç†æ¨¡çµ„
    â””â”€â”€ production.mjs     # è£½ä½œéƒ¨é–€æ¨¡çµ„
```

## ğŸš€ Step1: åŸºç¤é»é¤ç³»çµ±

### åŠŸèƒ½ç‰¹è‰²

- **AI å°è©±è§£æ**: ä½¿ç”¨è‡ªç„¶èªè¨€è™•ç†è§£æé¡§å®¢é»é¤éœ€æ±‚
- **è¨‚å–®é©—è­‰**: è‡ªå‹•æª¢æŸ¥è¨‚å–®è³‡è¨Šå®Œæ•´æ€§
- **äº’å‹•å¼é»é¤**: å¼•å°é¡§å®¢å®Œæˆè¨‚å–®è³‡è¨Š
- **æ”¯ä»˜æµç¨‹**: æ‰‹å‹•é¸æ“‡æ”¯ä»˜æ–¹å¼
- **è£½ä½œè½‰å–®**: è‡ªå‹•è½‰çµ¦è£½ä½œéƒ¨é–€

### æŠ€è¡“å¯¦ç¾

#### 1. AI å°è©±è™•ç†

```javascript
// ä½¿ç”¨ Ollama gemma3 æ¨¡å‹é€²è¡Œè‡ªç„¶èªè¨€è™•ç†
const response = await ollama.chat({
  model: "gemma3",
  messages: messages,
});
```

#### 2. è¨‚å–®è§£æ

```javascript
// è§£æ AI å›æ‡‰ä¸­çš„ JSON æ ¼å¼è¨‚å–®è³‡è¨Š
const orderData = parseOrderResponse(response.message.content);
```

#### 3. è¨‚å–®é©—è­‰

- æª¢æŸ¥å“é …æ˜¯å¦åœ¨èœå–®ä¸­
- é©—è­‰é£²æ–™å¤§å°ï¼ˆM/Lï¼‰
- ç¢ºèªæ•¸é‡ç‚ºæ­£æ•´æ•¸
- é©—è­‰å†°å¡Šå’Œç”œåº¦é¸é …
- æª¢æŸ¥æ·»åŠ å“é¸é …

#### 4. æ”¯ä»˜æµç¨‹

```javascript
// æ‰‹å‹•é¸æ“‡æ”¯ä»˜æ–¹å¼
const paymentMethods = Object.values(PAYMENT_METHODS);
const selectedMethod = paymentMethods[parseInt(paymentChoice) - 1];
```

### ä½¿ç”¨æµç¨‹

1. **å•Ÿå‹•ç³»çµ±**

   ```bash
   node step1.mjs
   ```

2. **é»é¤å°è©±**

   ```
   ğŸ‘¤ æ‚¨ï¼šæˆ‘è¦ä¸€æ¯çç å¥¶èŒ¶
   ğŸ¤– AIï¼šè«‹å•æ‚¨è¦é¸æ“‡ä»€éº¼å¤§å°çš„é£²æ–™ï¼Ÿè¦å¹¾æ¯ï¼Ÿå†°å¡Šå’Œç”œåº¦è¦å¦‚ä½•èª¿æ•´ï¼Ÿ
   ğŸ‘¤ æ‚¨ï¼šå¤§æ¯ï¼Œå¾®å†°å¾®ç³–ï¼ŒåŠ çç 
   ```

3. **è¨‚å–®ç¢ºèª**

   ```
   ğŸ“ è¨‚å–®å·²è¨˜éŒ„ï¼
     å“é …ï¼šçç å¥¶èŒ¶
     å¤§å°ï¼šL
     æ•¸é‡ï¼š1
     å†°å¡Šï¼šå¾®å†°
     ç”œåº¦ï¼šå¾®ç³–
     æ·»åŠ ï¼šçç 
   ```

4. **æ”¯ä»˜è™•ç†**

   ```
   ğŸ’° è¨‚å–®ç¸½é‡‘é¡ï¼š65 å…ƒ
   ğŸ’³ è«‹é¸æ“‡æ”¯ä»˜æ–¹å¼ï¼š
     1. Line Pay
     2. ç¾é‡‘
     3. ä¿¡ç”¨å¡
     4. è¡—å£æ”¯ä»˜
   ```

5. **è£½ä½œè½‰å–®**
   ```
   ğŸ­ è£½ä½œè¨‚å–®
     è¨‚å–®ç·¨è™Ÿï¼š2024-01-01T12:00:00.000Z
     è£½ä½œç‹€æ…‹ï¼šâ³ pending
     é ä¼°æ™‚é–“ï¼š4 åˆ†é˜
   ```

## ğŸ”§ Step2: å®Œæ•´çµå¸³ç³»çµ±

### åŠŸèƒ½ç‰¹è‰²

- **Function Calling**: ä½¿ç”¨ Ollama çš„ Function Calling åŠŸèƒ½
- **è‡ªå‹•åŒ–æµç¨‹**: å®Œå…¨è‡ªå‹•åŒ–çš„é»é¤åˆ°çµå¸³æµç¨‹
- **æ™ºæ…§å·¥å…·å‘¼å«**: AI è‡ªå‹•å‘¼å«ç›¸æ‡‰çš„å·¥å…·å‡½æ•¸
- **å³æ™‚è¨ˆç®—**: è‡ªå‹•è¨ˆç®—è¨‚å–®é‡‘é¡
- **ç„¡ç¸«æ•´åˆ**: è¨‚å–®ã€æ”¯ä»˜ã€è£½ä½œä¸€é«”åŒ–

### æŠ€è¡“å¯¦ç¾

#### 1. Function Calling å·¥å…·å®šç¾©

```javascript
const tools = [
  {
    type: "function",
    function: {
      name: "calculate_total",
      description: "è¨ˆç®—è¨‚å–®ç¸½é‡‘é¡",
      parameters: {
        type: "object",
        properties: {
          item: { type: "string", description: "é£²æ–™å“é …åç¨±" },
          size: { type: "string", enum: ["M", "L"], description: "é£²æ–™å¤§å°" },
          quantity: { type: "integer", minimum: 1, description: "æ•¸é‡" },
        },
        required: ["item", "size", "quantity"],
      },
    },
  },
  // ... å…¶ä»–å·¥å…·
];
```

#### 2. å·¥å…·å‘¼å«è™•ç†

```javascript
async function handleToolCalls(toolCalls) {
  for (const toolCall of toolCalls) {
    const { id, function: func } = toolCall;

    switch (func.name) {
      case "process_order":
        const order = purchase(orderParams.item, orderParams.size, ...);
        break;
      case "process_payment":
        const paymentResult = payment(currentOrder, paymentParams.paymentMethod, paymentParams.amount);
        break;
      // ... å…¶ä»–å·¥å…·è™•ç†
    }
  }
}
```

#### 3. è‡ªå‹•åŒ–æµç¨‹

1. **è¨ˆç®—ç¸½é‡‘é¡**: `calculate_total` å·¥å…·
2. **å»ºç«‹è¨‚å–®**: `process_order` å·¥å…·
3. **è™•ç†æ”¯ä»˜**: `process_payment` å·¥å…·
4. **è½‰çµ¦è£½ä½œ**: `transfer_to_production` å·¥å…·

### ä½¿ç”¨æµç¨‹

1. **å•Ÿå‹•ç³»çµ±**

   ```bash
   node step2.mjs
   ```

2. **æ™ºæ…§é»é¤**

   ```
   ğŸ‘¤ æ‚¨ï¼šæˆ‘è¦ä¸€æ¯å¤šå¤šç¶ ï¼Œå¤§æ¯ï¼Œå¾®ç³–å¾®å†°
   ğŸ¤– AIï¼šå¥½çš„ï¼æˆ‘ä¾†ç‚ºæ‚¨è™•ç†è¨‚å–®ã€‚

   ğŸ”§ æ­£åœ¨è™•ç†å·¥å…·å‘¼å«...
   ğŸ’° è¨‚å–®ç¸½é‡‘é¡ï¼š60 å…ƒ

   è«‹é¸æ“‡æ”¯ä»˜æ–¹å¼ï¼š
   1. Line Pay
   2. ç¾é‡‘
   3. ä¿¡ç”¨å¡
   4. è¡—å£æ”¯ä»˜
   ```

3. **è‡ªå‹•è™•ç†**
   ```
   ğŸ“ è¨‚å–®å·²è¨˜éŒ„ï¼
   ğŸ’³ æ”¯ä»˜è³‡è¨Š
   ğŸ­ è£½ä½œè¨‚å–®
   ğŸ‰ è¨‚å–®è™•ç†å®Œæˆï¼æ„Ÿè¬æ‚¨çš„è³¼è²·ï¼
   ```

## ğŸ“Š è³‡æ–™ç®¡ç†

### æª”æ¡ˆçµæ§‹

#### `data/menu.json`

```json
{
  "menu": {
    "tea": [
      {
        "name_zh": "å¤šå¤šç¶ ",
        "prices": { "M": 50, "L": 60 },
        "recommended": true
      }
    ]
  }
}
```

#### `data/orders.json`

```json
[
  {
    "timestamp": "2024-01-01T12:00:00.000Z",
    "item": "å¤šå¤šç¶ ",
    "size": "L",
    "quantity": 1,
    "ice": "å¾®å†°",
    "sugar": "å¾®ç³–",
    "addOn": null,
    "status": "complete"
  }
]
```

#### `data/payments.json`

```json
[
  {
    "orderId": "2024-01-01T12:00:00.000Z",
    "timestamp": "2024-01-01T12:01:00.000Z",
    "paymentMethod": "Line Pay",
    "amount": 60,
    "status": "completed"
  }
]
```

#### `data/production.json`

```json
[
  {
    "orderId": "2024-01-01T12:00:00.000Z",
    "status": "pending",
    "estimatedTime": 3,
    "orderDetails": {
      "item": "å¤šå¤šç¶ ",
      "size": "L",
      "quantity": 1
    }
  }
]
```

## ğŸ› ï¸ å®‰è£èˆ‡è¨­å®š

### å‰ç½®éœ€æ±‚

- Node.js 18+
- Ollama (å·²å®‰è£ llama3.2 æ¨¡å‹)

### å®‰è£æ­¥é©Ÿ

1. **å®‰è£ä¾è³´**

   ```bash
   npm install
   ```

2. **ç¢ºèª Ollama æ¨¡å‹**

   ```bash
   ollama list
   # ç¢ºä¿æœ‰ llama3.2 æ¨¡å‹
   ```

3. **åˆå§‹åŒ–è³‡æ–™æª”æ¡ˆ**
   ```bash
   # è³‡æ–™æª”æ¡ˆå·²é è¨­ç‚ºç©ºé™£åˆ— []
   ```

## ğŸ¯ åŠŸèƒ½æ¯”è¼ƒ

| åŠŸèƒ½             | Step1       | Step2       |
| ---------------- | ----------- | ----------- |
| AI å°è©±          | âœ… åŸºç¤å°è©± | âœ… æ™ºæ…§å°è©± |
| è¨‚å–®è§£æ         | âœ… æ‰‹å‹•è§£æ | âœ… è‡ªå‹•è§£æ |
| Function Calling | âŒ          | âœ…          |
| è‡ªå‹•åŒ–æµç¨‹       | âŒ          | âœ…          |
| æ”¯ä»˜æ–¹å¼         | æ‰‹å‹•é¸æ“‡    | è‡ªå‹•è™•ç†    |
| è£½ä½œè½‰å–®         | æ‰‹å‹•è§¸ç™¼    | è‡ªå‹•è§¸ç™¼    |
| éŒ¯èª¤è™•ç†         | åŸºç¤        | å®Œæ•´        |
| æ“´å±•æ€§           | ä¸­ç­‰        | é«˜          |

## ğŸ”§ é–‹ç™¼æŒ‡å—

### æ–°å¢é£²æ–™å“é …

åœ¨ `data/menu.json` ä¸­æ–°å¢ï¼š

```json
{
  "name_zh": "æ–°é£²æ–™",
  "prices": { "M": 55, "L": 65 },
  "recommended": false,
  "special": false
}
```

### æ–°å¢æ”¯ä»˜æ–¹å¼

åœ¨ `utils/payment.mjs` ä¸­ä¿®æ”¹ï¼š

```javascript
export const PAYMENT_METHODS = {
  LINE_PAY: "Line Pay",
  CASH: "ç¾é‡‘",
  CREDIT_CARD: "ä¿¡ç”¨å¡",
  JKO_PAY: "è¡—å£æ”¯ä»˜",
  NEW_PAYMENT: "æ–°æ”¯ä»˜æ–¹å¼", // æ–°å¢
};
```

### ä¿®æ”¹è£½ä½œæ™‚é–“è¨ˆç®—

åœ¨ `utils/production.mjs` ä¸­èª¿æ•´ï¼š

```javascript
function calculateEstimatedTime(order) {
  let baseTime = 3; // åŸºç¤æ™‚é–“
  // è‡ªå®šç¾©è¨ˆç®—é‚è¼¯
  return Math.ceil(baseTime);
}
```

## ğŸš€ æœªä¾†æ“´å±•

### è¨ˆåŠƒåŠŸèƒ½

1. **æœƒå“¡ç³»çµ±**: ç©åˆ†ã€å„ªæƒ åˆ¸ç®¡ç†
2. **åº«å­˜ç®¡ç†**: å³æ™‚åº«å­˜è¿½è¹¤
3. **å ±è¡¨ç³»çµ±**: éŠ·å”®çµ±è¨ˆã€ç†±é–€å•†å“
4. **è¡Œå‹•æ‡‰ç”¨**: React Native æ‰‹æ©Ÿ App
5. **å¤šèªè¨€æ”¯æ´**: è‹±æ–‡ã€æ—¥æ–‡ä»‹é¢
6. **èªéŸ³è¾¨è­˜**: èªéŸ³é»é¤åŠŸèƒ½

### æŠ€è¡“å‡ç´š

1. **è³‡æ–™åº«**: å¾ JSON å‡ç´šåˆ° PostgreSQL
2. **API æœå‹™**: å»ºç«‹ RESTful API
3. **å³æ™‚é€šè¨Š**: WebSocket å³æ™‚æ›´æ–°
4. **é›²ç«¯éƒ¨ç½²**: Docker + Kubernetes
5. **ç›£æ§ç³»çµ±**: æ•ˆèƒ½ç›£æ§ã€éŒ¯èª¤è¿½è¹¤

## ğŸ“š è©³ç´°æ–‡æª”

### æŠ€è¡“æ–‡æª”

- **[Step1 æŠ€è¡“æ–‡æª”](STEP1_GUIDE.md)** - åŸºç¤é»é¤ç³»çµ±è©³ç´°æŠ€è¡“èªªæ˜
- **[Step2 æŠ€è¡“æ–‡æª”](STEP2_GUIDE.md)** - å®Œæ•´çµå¸³ç³»çµ±è©³ç´°æŠ€è¡“èªªæ˜
- **[ç³»çµ±æ¯”è¼ƒæ–‡æª”](COMPARISON.md)** - Step1 èˆ‡ Step2 è©³ç´°æ¯”è¼ƒåˆ†æ

### å¿«é€Ÿé–‹å§‹

1. é–±è®€ **[ç³»çµ±æ¯”è¼ƒæ–‡æª”](COMPARISON.md)** é¸æ“‡é©åˆçš„ç‰ˆæœ¬
2. æŸ¥çœ‹å°æ‡‰çš„æŠ€è¡“æ–‡æª”äº†è§£å¯¦ä½œç´°ç¯€
3. æŒ‰ç…§å®‰è£æ­¥é©Ÿè¨­å®šç’°å¢ƒ
4. é–‹å§‹ä½¿ç”¨ç³»çµ±

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

### è²¢ç»æŒ‡å—

1. Fork æœ¬å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

## ğŸ“„ æˆæ¬Š

MIT License

---

**é–‹ç™¼è€…**: AI Assistant  
**ç‰ˆæœ¬**: 2.0.0  
**æ›´æ–°æ—¥æœŸ**: 2025 å¹´ 6 æœˆ
